<Window x:Class="Test2.Window2"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Test2"
        mc:Ignorable="d"
        Title="Window2" Height="450" Width="800">
    <Window.Resources>

        <Style x:Key="ModernLoadingSpinnerStyle" TargetType="ProgressBar">
            <Setter Property="Visibility" Value="Visible"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Border Background="White" CornerRadius="12" Padding="40,30" MinWidth="250">
                            <Border.Effect>
                                <DropShadowEffect ShadowDepth="1" BlurRadius="15" Color="#E0E0E0" Opacity="0.6"/>
                            </Border.Effect>

                            <StackPanel>
                                <Grid Width="50" Height="50" RenderTransformOrigin="0.5,0.5">

                                    <Path Stroke="#3B82F6" StrokeThickness="6" StrokeStartLineCap="Round" StrokeEndLineCap="Round">
                                        <Path.Data>
                                            <PathGeometry>
                                                <PathFigure StartPoint="45,25">
                                                    <ArcSegment Size="20,20" Point="25,5" SweepDirection="Clockwise" IsLargeArc="True"/>
                                                </PathFigure>
                                            </PathGeometry>
                                        </Path.Data>
                                    </Path>

                                    <Grid.RenderTransform>
                                        <RotateTransform Angle="0" />
                                    </Grid.RenderTransform>
                                </Grid>

                                <TextBlock Text="Đang tải dữ liệu..."
                                           FontSize="18"
                                           Foreground="#4A5568"
                                           HorizontalAlignment="Center"
                                           Margin="0,25,0,0"/>
                            </StackPanel>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsIndeterminate" Value="True">
                                <Trigger.EnterActions>
                                    <BeginStoryboard>
                                        <Storyboard>
                                            <DoubleAnimation Storyboard.TargetProperty="(UIElement.RenderTransform).(RotateTransform.Angle)"
                                                             From="0" To="360" Duration="0:0:1" RepeatBehavior="Forever" />
                                        </Storyboard>
                                    </BeginStoryboard>
                                </Trigger.EnterActions>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <DockPanel>
        </DockPanel>

        <Border Background="#90FFFFFF" Visibility="{Binding IsProcessing, Converter={StaticResource BoolToVisibilityConverter}}">

            <ProgressBar IsIndeterminate="True" 
                         Style="{StaticResource ModernLoadingSpinnerStyle}"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Center"/>
        </Border>
    </Grid>
</Window>
